<div class="notification-container">
  <span class="material-icons bell-icon" [class.has-unread]="hasUnread()" (click)="toggleDropdown()">
    notifications
  </span>
  @if (showDropdown) {
    <div class="notifications-dropdown">
      <div class="notifications-header">
        <h4>Notifications</h4>
        <button class="mark-all" (click)="markAllAsRead()">Mark all as read</button>
      </div>

      @if (notifications.length === 0) {
        <div class="empty-state">
          No notifications yet.
        </div>
      }

      @for(notification of notifications; track notification.id) {
        @if (notification) {
          <div class="notification-item">
            <div class="notification-image">
              <img [src]="notification.notificationCoverUrl" alt="Notification Cover" />
            </div>
            <div class="notification-content">
              <a *ngIf="notification.link" (click)="handleNotificationClick($event, notification.id, notification.link)"
                 class="notification-link">
                <strong>{{ notification.title }}</strong>
              </a>

              <strong>{{ notification.title }}</strong>

              <p>{{ notification.message }}</p>
              <small>{{ notification.createdAt | date: 'MMM d, y' }}</small>
            </div>

            <button class="mark-read-button" (click)="markAsRead(notification.id)">
              Mark as read
            </button>
          </div>
        }
      }
    </div>
  }
</div>
